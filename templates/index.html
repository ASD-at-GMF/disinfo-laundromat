<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disinformation Laundromat</title>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.2/js/dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.1/js/dataTables.buttons.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.dataTables.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.html5.js"></script>
    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.bootstrap4.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particlesjs/2.2.3/particles.min.js"></script>

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">


    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.bootstrap4.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YC7N6ZZD7P"></script>
    <script>

        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-YC7N6ZZD7P');
    </script>
    <script>
        $(function () {
            $('[data-toggle="popover"]').popover()
        })
        window.onload = function () {
            Particles.init({
                selector: '.background',
                color: ['#DA0463', '#C2D3FC', '#F5F3CE'],
                speed: 0.3,
                connectParticles: true,
                minDistance: 130,
            });
        };

        // This function is triggered when the "View Links" button is clicked
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('.toggle-links').forEach(function (button) {
                button.addEventListener('click', function () {
                    const linkList = button.parentElement.parentElement.nextElementSibling.querySelector('.link-list');
                    linkList.style.display = linkList.style.display === 'none' ? 'table' : 'none';
                });
            });
        });
        // This function is triggered when the "Fingerprint" button is clicked
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('.submit-fingerprint').forEach(function (button) {
                button.addEventListener('click', function () {
                    var url = this.getAttribute('data-url'); // Get the URL from the data attribute of the button
                    var form = document.querySelector('form[action="/fingerprint"]'); // Find the fingerprint form
                    form.querySelector('#url').value = url; // Set the URL into the input field
                    form.submit(); // Submit the form
                });
            });
        });
        document.addEventListener('DOMContentLoaded', function () {
            // Select the forms by class or id or tag, e.g., 'form' to target all forms
            document.querySelectorAll('form').forEach(function (form) {
                form.addEventListener('submit', function () {
                    // Show the loading icon
                    if (form.id !== 'batch-search-content' && form.id !== 'batch-search-metadata') {
                        document.getElementById('loading').style.display = 'block';
                    }
                    else {
                        document.getElementById('file-download-warning').style.display = 'block';
                    }
                    // Optionally disable the submit button to prevent multiple submissions
                    this.querySelector('button[type="submit"]').disabled = true;
                });
            });
        });
        document.addEventListener('DOMContentLoaded', function () {
            var matchesTable = document.getElementById('matches_table');
            var contentTable = document.getElementById('content_table');

            var scrollToResults = document.getElementById('scroll-to-results');

            if ((matchesTable && scrollToResults) || (contentTable && scrollToResults)) {
                scrollToResults.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('autoFillMirrorButton').addEventListener('click', function() {
                // Set the URL input value
                document.getElementById('url').value = 'https://actualidad.rt.com,https://actualidad-rt.com,https://esrt.online,https://esrt.press';
                
                // Toggle checkboxes
                document.getElementById('run_urlscan').checked = true;
                document.getElementById('internal_only').checked = true;
                $('#myTab a[href="#metadataTab"]').click();
                var searchButton = document.getElementById('metadataSearchButton');
                searchButton.classList.add('pulse-effect');
                searchButton.addEventListener('click', function() {
                    searchButton.classList.remove('pulse-effect');
                });
            });
        });
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('autoFillRTLaunderingButton').addEventListener('click', function() {
                // Set the content input value
                document.getElementById('contentToSearch').value = 'https://www.rt.com/news/594935-us-uk-ukraine-moscow-terrorism/';

                $('#myTab a[href="#contentTab"]').click();
                var searchButton = document.getElementById('contentSearchButton');
                searchButton.classList.add('pulse-effect');
                searchButton.addEventListener('click', function() {
                    searchButton.classList.remove('pulse-effect');
                });
            });
        });
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('autoFillIntelButton').addEventListener('click', function() {
                // Set the URL input value
                document.getElementById('url').value = 'https://globalresearch.ca/';
                
                // Toggle checkboxes
                document.getElementById('run_urlscan').checked = true;
                $('#myTab a[href="#metadataTab"]').click();
                var searchButton = document.getElementById('metadataSearchButton');
                searchButton.classList.add('pulse-effect');
                searchButton.addEventListener('click', function() {
                    searchButton.classList.remove('pulse-effect');
                });
                
            });
        });

        $(document).ready(function () {

            $('#content_table').DataTable(
                {
                    responsive: true,
                    pageLength: 50,
                    autoWidth: false,
                    columnDefs: [
                        { targets: 0, width: "20%" },
                        { targets: 1, width: "25%" },
                        { targets: 2, width: "35%" },

                        { targets: 3, width: "10%" },
                        { targets: 4, width: "10%" },

                    ],
                    layout: {
                        topStart: {
                            buttons: ['pageLength', 'copy', 'csv', 'excel']
                        },
                    },
                    order: [[4, 'desc']]
                });
            var indicatorsTable = $('#indicators_table').DataTable(
                {
                    responsive: true,
                    pageLength: 50,
                    autoWidth: false,
                    columnDefs: [
                        { targets: 0, width: "20%" },
                        { targets: 1, width: "30%" },
                        { targets: 2, width: "50%" },

                    ],
                    layout: {
                        topStart: {
                            buttons: ['pageLength', 'copy', 'csv', 'excel']
                        },
                    },
                    order: [[1, 'asc'], [0, 'asc']]
                });
            $('#matches_table').DataTable(
                {
                    responsive: true,
                    pageLength: 50,
                    autoWidth: false,
                    columnDefs: [
                        { targets: 0, width: "15%" },
                        { targets: 1, width: "15%" },
                        { targets: 2, width: "30%" },
                        { targets: 3, width: "40%" },

                    ],
                    layout: {
                        topStart: {
                            buttons: ['pageLength', 'copy', 'csv', 'excel']
                        },
                    },
                    order: [[2, 'asc'], [0, 'asc'], [1, 'asc']]
                }
            );
            $('[data-toggle="popover"]').popover({
                placement: 'top',
                html: true
            });
            $('#search_engines').multiselect({
                includeSelectAllOption: true,
            });
            $.fn.dataTable.ext.search.push(
                function (settings, data, dataIndex) {
                    var tier = $('#indicators_table').attr('data-tier-filter');
                    if (!tier) return true; // no filter applied

                    // Assuming the indicator type is in the first column
                    var cellHtml = data[0];
                    var matches = cellHtml.match(/(\d+)-[a-z]+/i); // Regex to extract the tier indicator
                    if (!matches) return false; // If no match is found, don't display the row

                    var type = matches[0];
                    return type.startsWith(tier + '-');
                }
            );

            $('#myTab a').on('click', function (e) {
                e.preventDefault();
                // Remove 'active' class and 'd-none' from all tab contents
                $('.tab-pane').removeClass('active show').addClass('d-none');


                // Add 'active' class to current tab's content and remove 'd-none'
                $($(this).attr('href')).addClass('active show').removeClass('d-none');

                // Change the active state on the tabs
                $('#myTab .nav-link').removeClass('active show');
                $(this).addClass('active show');
            });
            $('#file').on('change', function () {
                //get the file name
                var fileName = $(this).val().split('\\').pop();
                //replace the "Choose a file" label
                $(this).next('.custom-file-label').html(fileName);
            })
            $('#fingerprint-file').on('change', function () {
                //get the file name
                var fileName = $(this).val().split('\\').pop();
                //replace the "Choose a file" label
                $(this).next('.custom-file-label').html(fileName);
            })
            $('#url').on('input', function () {
                var urls = $(this).val().split(',');
                var allValid = urls.every(function (url) {
                    return url.trim().startsWith('https://');
                });

                var warningElement = $('#urlWarning');

                if (!allValid) {
                    warningElement.text('All URLs must start with "https://". Separate multiple URLs with a comma.'); // Set the warning message
                    warningElement.show(); // Show the Bootstrap alert
                } else {
                    warningElement.hide(); // Hide the Bootstrap alert if all URLs are valid
                }
            });
            // == === == GDPR consent modal 
            // Function to check the consent cookie
            function checkConsent() {
                return document.cookie.split(';').some(function (item) {
                    return item.trim().startsWith('gdprConsent=');
                });
            }

            // Function to set the consent cookie
            function setConsent(value) {
                document.cookie = "gdprConsent=" + value + "; path=/; max-age=" + 60 * 60 * 24 * 365;
            }

            // Show modal if consent not given
            if (!checkConsent()) {
                $('#gdprConsentModal').show();
            }

            // Accept button handler
            $('#gdprAccept').click(function () {
                setConsent(true);
                $('#gdprConsentModal').hide();
            });

            // Reject button handler
            $('#gdprReject').click(function () {
                setConsent(false);
                $('#gdprConsentModal').hide();
            });
            //== === end GDPR consent modal 
            // == === == Rotating Text Animation

            const verbs = ["Discover", "Investigate", "Track"];
            const nouns = [
                "content relationships",
                "content laundering",
                "shared metadata",
                "information networks",
                "site architecture"
            ];


            function getRandomElement(arr, current) {
                let randomElement = current;
                while (randomElement === current) {
                    randomElement = arr[Math.floor(Math.random() * arr.length)];
                }
                return randomElement;
            }
            function swapVerb() {
                let currentVerb = document.getElementById('lead-verb').textContent;
                let nextVerb = getRandomElement(verbs, currentVerb);

                document.getElementById('lead-verb').style.opacity = '0';

                setTimeout(function () {
                    document.getElementById('lead-verb').textContent = nextVerb;
                    document.getElementById('lead-verb').style.opacity = '1';
                }, 500);
            }
            function swapNoun() {
                let currentNoun = document.getElementById('lead-noun').textContent;
                let nextNoun = getRandomElement(nouns, currentNoun);

                document.getElementById('lead-noun').style.opacity = '0';

                setTimeout(function () {
                    document.getElementById('lead-noun').textContent = nextNoun;
                    document.getElementById('lead-noun').style.opacity = '1';
                }, 500);
            }

            // Start the swapping with verbs and set intervals
            swapVerb();
            setInterval(function () {
                // Swap verb, wait 5 seconds, then swap noun, to ensure one changes at a time
                swapVerb();
                setTimeout(swapNoun, 3000);
            }, 6000);
            // == === == End Rotating Text Animation

        });
    </script>
</head>

<body class="bg-dark-gray ">

    <div id="loading" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner-border text-primary" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
    </div>
    <!--  -->
    <div class="ml-5 mr-5 text-light-gray ">
        <div class="py-5">

            <div class="row top-nav">
                <div class="col-md-9">

                    <div class=" mb-4">
                        <h2 class="lead">The Information Laundromat</h2>
                    </div>
                </div>

                <div class="col-md-1">
                    <div class=" mb-4 text-right">
                        <h2 class="lead">
                            <a href="/"><strong>Search</strong></a>
                        </h2>
                    </div>
                </div>
                <div class="col-md-1">
                    <div class=" mb-4 text-right">
                        <h2 class="lead">
                            <a href="{{ url_for('about') }}">About</a>
                        </h2>
                    </div>
                </div>
                <div class="col-md-1">
                    <div class=" mb-4 text-right">
                        <h2 class="lead">
                            <a href="{{ url_for('indicators_gui') }}">Indicators</a>
                        </h2>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-lg-4 mb-5 mt-5">
                    <div class="col text-center " id=dynamic-content>
                        <h3 class="display-4">
                            <span id="lead-verb">Discover </span>
                            <span id="lead-noun">content relationships</span> from across the infosphere
                        </h3>
                    </div>
                </div>
                <div class="col-lg-8 mb-3">
                    <div class="card">
                        <div class="card-header p-0 text-center">
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item col-4 p-0">
                                    <a class="nav-link active" data-toggle="tab" href="#contentTab" >
                                        <h3>Content Similarity</h3>
                                    </a>
                                </li>
                                <li class="nav-item col-4 p-0">
                                    <a class="nav-link" data-toggle="tab" href="#metadataTab" >
                                        <h3>Metadata Similarity</h3>
                                    </a>
                                </li>
                                <li class="nav-item col-4 p-0">
                                    <a class="nav-link" data-toggle="tab" href="#batchTab" >
                                        <h3>Batch Similarity</h3>
                                    </a>
                                </li>

                            </ul>
                        </div>
                        <div class="card-body card-body-400">
                            <div id="contentTab" class="container tab-pane fade active show">
                                <form method="POST" action="/content-search" class="tabcontent">
                                    <div class="row mt-1">
                                        <div class="col-sm">
                                            <p class="card-text">
                                                Search for instances of reposted content by title and/or content.
                                                This
                                                will
                                                search search services, the GDELT database, and copyscape for text
                                                that
                                                closely
                                                match your query. Searching by URL attempts to automatically parses
                                                the
                                                title
                                                and content, but will not be successful for all articles
                                            </p>
                                        </div>
                                    </div>
                                    <hr class="my-4">
                                    <div class="row mt-3 ">
                                        <div class="col-sm input-group">

                                            <textarea type="text" rows=2 class="form-control" name="contentToSearch"
                                                id="contentToSearch" aria-describedby="basic-addon2"
                                                placeholder="Add article link, title or a text snippet"
                                                required></textarea>
                                            <div class="input-group-append">
                                                <span class="input-group-text" id="basic-addon2">
                                                    <i class="fas fa-info-circle" data-toggle="popover"
                                                        data-content="Enter the full url, e.g. https://tech.cnn.com/article-title.html; this feature doesn't work on all sites, run a title/content query if prompted"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm">
                                            Country:
                                            <i class="fas fa-info-circle" data-toggle="popover"
                                                data-content="Match within a provided list of multiple URLS"></i>
                                        </div>
                                        <div class="col-sm">
                                            Language:
                                            <i class="fas fa-info-circle" data-toggle="popover"
                                                data-content="Match within a provided list of multiple URLS"></i>
                                        </div>
                                        <div class="col-sm">
                                            Engines:
                                            <i class="fas fa-info-circle" data-toggle="popover"
                                                data-content="Match within a provided list of multiple URLS"></i>
                                        </div>
                                        <div class="col-sm">
                                        </div>
                                    </div>
                                    <div class="row mt-1">
                                        <div class="col-sm input-group">

                                            <select class="form-control" name="country" id="country"
                                                aria-describedby="basic-addon3">
                                                {% for code, name in countries.items() %}
                                                <option value="{{ code }}" {% if code=='us' %}selected{% endif %}>{{
                                                    name }}
                                                </option>
                                                {% endfor %}
                                            </select>

                                        </div>

                                        <div class="col-sm input-group">

                                            <select class="form-control" name="language" id="language"
                                                aria-describedby="basic-addon4">
                                                {% for code, name in languages.items() %}
                                                <option value="{{ code }}" {% if code=='en' %}selected{% endif %}>{{
                                                    name }}
                                                </option>
                                                {% endfor %}
                                            </select>

                                        </div>

                                        <div class="col-sm input-group">
                                            <select class="form-control" multiple="multiple" name="search_engines"
                                                id="search_engines">
                                                {% for code, name in engines.items() %}
                                                <option value="{{ code }}" {% if code=='all' %}selected{% endif %}>
                                                    {{
                                                    name
                                                    }}
                                                </option>
                                                {% endfor %}
                                            </select>

                                        </div>

                                        <div class="col-sm">
                                            <button class="btn btn-secondary btn-block" id="contentSearchButton">Search</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div id="metadataTab" class="container tab-pane fade d-none">
                                <form method="POST" action="/url-search" class="tabcontent-fingerprint">
                                    <div class="row mt-1">
                                        <div class="col-sm">
                                            <p class="card-text">
                                                Enter Domain: Ensure you include https:// and any subdomain you're
                                                interested in
                                                (e.g. https://tech.cnn.com). Multiple sites can be specified,
                                                seperated
                                                by a
                                                comma
                                            </p>
                                        </div>

                                    </div>
                                    <div class="row mt-3 ">
                                        <div id="urlWarning" class="alert alert-warning" role="alert"
                                            style="display: none;">
                                            <!-- Warning message will be inserted here -->
                                        </div>
                                        </div>
                                    <div class="row mt-3 ">
                                        <div class="col-sm input-group">
                                            <input type="text" class="form-control" aria-describedby="basic-addon6"
                                                placeholder="Enter one or more domains/link" name="url" id="url"
                                                required>
                                            <div class="input-group-append">
                                                <span class="input-group-text" id="basic-addon6">
                                                    <i class="fas fa-info-circle" data-toggle="popover"
                                                        data-content="Enter the full url, e.g. https://tech.cnn.com/article-title.html; this feature doesn't work on all sites, run a title/content query if prompted"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-sm input-group">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="run_urlscan"
                                                    name="run_urlscan" value="no">
                                                <label class="form-check-label" for="run_urlscan">Run URLSCAN
                                                </label>
                                                <i class="fas fa-info-circle" data-toggle="popover"
                                                    data-content="May take up to 2 minutes"></i>
                                            </div>
                                        </div>

                                        <div class="col-sm input-group">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="internal_only"
                                                    name="internal_only" value="option1">
                                                <label class="form-check-label" for="in-group">In-group matching
                                                </label>
                                                <i class="fas fa-info-circle" data-toggle="popover"
                                                    data-content="Match within a provided list of multiple URLS"></i>
                                            </div>
                                        </div>
                                        <div class="col-sm">
                                        </div>
                                        <div class="col-sm">
                                            <button class="btn btn-secondary btn-block" id="metadataSearchButton">Search</button>
                                        </div>
                                    </div>

                                </form>
                            </div>
                            <div id="batchTab" class="container tab-pane fade  d-none">

                                <form method="POST" action="/batch-search-content" id="batch-search-content"
                                    enctype="multipart/form-data">

                                    <div class="row mt-3">
                                        <h5 class="card-title">Batch Content Search</h5>
                                    </div>
                                    <div class="row mt-3">
                                        Requires the following columns: combineOperator, (either AND or OR) language, (2
                                        letter code, e.g. en) country, (2 letter code, e.g. us), engines (comma
                                        separated list of search engines, e.g. google,bing), and your choice of EITHER
                                        url (full url, e.g. https://tech.cnn.com/article-title.html) or titleQuery and
                                        contentQuery (text snippets).

                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6 input-group">
                                            <div class="form-check form-check-inline">
                                                <input type="file" class="custom-file-input" id="file" name="file">
                                                <label class="custom-file-label" for="file">Content CSV</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-md-6 input-group">
                                            <input type="email" class="form-control" id="email" name="email"
                                                aria-describedby="emailHelp"
                                                placeholder="Enter an email address: name@example.com" required>

                                        </div>
                                        <div class="col-md-3">

                                        </div>

                                        <div class="col-md-3">
                                            <button class="btn btn-secondary btn-block">Search</button>
                                        </div>

                                    </div>
                                </form>
                                <hr class="my-4">
                                <form method="POST" action="/batch-search-metadata" id="batch-search-metadata"
                                    enctype="multipart/form-data">
                                    <div class="row mt-3">
                                        <h5 class="card-title">Batch Metadata Search</h5>
                                    </div>
                                    <div class="row mt-3">
                                        Requires only one column: url. Must be a full url, e.g. https://tech.cnn.com/
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6  input-group">
                                            <div class="form-check form-check-inline">
                                                <input type="file" class="custom-file-input" id="fingerprint-file"
                                                    name="fingerprint-file">
                                                <label class="custom-file-label" for="fingerprintCSV">Metadata
                                                    CSV</label>

                                            </div>
                                        </div>

                                        <div class="col-md-3 input-group">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="run_urlscan"
                                                    name="run_urlscan" value="no">
                                                <label class="form-check-label" for="run_urlscan">Run URLSCAN
                                                </label>
                                                <i class="fas fa-info-circle" data-toggle="popover"
                                                    data-content="May take up to 2 minutes"></i>
                                            </div>
                                        </div>

                                        <div class="col-md-3 input-group">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="internal_only"
                                                    name="internal_only" value="option1">
                                                <label class="form-check-label" for="in-group">In-group matching
                                                </label>
                                                <i class="fas fa-info-circle" data-toggle="popover"
                                                    data-content="Match within a provided list of multiple URLS"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6 input-group">
                                            <input type="email" class="form-control" id="email" name="email"
                                                aria-describedby="emailHelp"
                                                placeholder="Enter an email address: name@example.com" required>

                                        </div>
                                        <div class="col-md-3">

                                        </div>

                                        <div class="col-md-3">
                                            <button class="btn btn-secondary btn-block">Search</button>
                                        </div>

                                    </div>
                                </form>
                                <div id="file-download-warning" class="alert alert-warning mt-3" role="alert"
                                    style="display: none;">
                                    <strong>Warning!</strong> Downloading the results of a batch search may take a long
                                    time and may not be successful for large datasets. The results will be emailed to
                                    the provided email address.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-5">

            </div>
            <div class="row">
                <!-- 3 evenly spaced cards with usage scenarios written in them -->


                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Investigate the laundering of Russian content and narratives
                            </h5>
                            <p class="card-text">
                                This search shows how the Laundromat can be used to identify sites that are laundering content from Russian state media. It lists sample of articles from with a high degree of similarity, sharing much of their content with the original article. 
                                The report below digs into this phenomenon at scale and provides a detailed analysis of the network of sites that are laundering content from Russian state media. 
                                
                            </p>
                        </div>
                        <div class="card-footer">
                            <a href="https://securingdemocracy.gmfus.org/from-russia-with-spin-how-content-from-russian-state-media-is-laundered-by-polish-blogs/" target="_blank" class="btn btn-secondary">Read the Report</a>
                            <button type="button" id="autoFillRTLaunderingButton" class="btn btn-primary float-right">Try the Search</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Generate OSINT leads and intelligence
                            </h5>
                            <p class="card-text">
                                In addition to identifying sites that are laundering content from Russian state media, 
                                the Laundromat can be used to generate leads and intelligence about how sites are made, who's advertising on them, their associated social media accounts, and more.
                            </p>
                        </div>
                        <div class="card-footer">
                            <button type="button" id="autoFillIntelButton" class="btn btn-primary float-right">Try the Search</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Explore RT's network of mirror websites
                            </h5>
                            <p class="card-text">
                                Researchers from the Instute for Strategic Dialoguee have uncovered several domain names that explicitly mirror (including branding, code, etc) a network of mirror websites of several RT websites. 
                                The Laundromat's Metadata Similarity feature can be used to iodentify the shared characteristics of the network of websites.</p>
                            </p>
                        </div>
                        <div class="card-footer">
                            <a href="https://www.isdglobal.org/digital_dispatches/rt-articles-are-finding-their-way-to-european-audiences-but-how/" target="_blank" class="btn btn-secondary">Read the Report</a>
                            <button type="button" id="autoFillMirrorButton" class="btn btn-primary float-right">Try the Search</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>


        <div class="mt-4 ml-5 mr-5">
            <h2>Interpreting the Laundromat Results <a href="{{ url_for('indicators_gui') }}"
                    class="btn btn-secondary ">View
                    All Indicators + Descriptions</a></h2>
            <!-- 
            <ul class="list-group">
                <li class="list-group-item">
                    <strong class="alert-success">Tier 1: Conclusive Indicators</strong>
                    <p>Tier 1 offers high-confidence evidence of a link between websites. Key indicators
                        include shared domain names, identical IDs for web services, multi-domain certificates, and
                        matching WHOIS information (when visible). However, misleading tier 1 indicators may occur
                        when sites are using shared hosting or DDOS protection services.</p>
                </li>
                <li class="list-group-item">
                    <strong class="alert-warning">Tier 2: Associative Indicators</strong>
                    <p>Tier 2 indicators suggest a a possibility of a shared link between sites, but they are
                        less definitive than Tier 1. They include the use of the same Content Delivery Network
                        (CDN), similar IP addresses within the same subnet, matching meta tags, and commonalities in
                        standard and custom response headers. These elements indicate the possibility of association
                        but require further corroboration.</p>
                </li>
                <li class="list-group-item">
                    <strong class="alert-dark">Tier 3: Tertiary Indicators</strong>
                    <p>Tier 3 includes weaker, more circumstantial indicators that require additional validation.
                        They encompass shared architectural aspects like operating systems, Content Management
                        Systems (CMS), platforms, plugins, and libraries. Also included are common hosting services,
                        shared unique identifiers, highly similar images, extensive overlap in CSS classes, HTML ID
                        tags and iFrame ID tags. These indicators alone are not conclusive but can support stronger
                        evidence from Tier 1 and Tier 2.</p>
                </li> 
            </ul>-->
        </div>
        <div id="scroll-to-results"></div>

        <div class="mt-4 ml-5 mr-5">
            <hr />
            {% if results %}
            <div class="row mb-3">
                <div class="col-md-8">
                    <h2>Results with similar titles or content</h2>
                </div>


                <div class="col-md-4 ">
                    <form method="post" action="/download_csv" class="float-right">
                        <button class="btn btn-primary mr-3" type="button" data-toggle="collapse"
                            data-target="#collapsibleTable" aria-expanded="false" aria-controls="collapsibleTable">
                            Show/Hide Table
                        </button>
                        <!-- Hidden input containing the CSV data -->
                        <input type="hidden" name="csv_data" value="{{ csv_data|safe }}">
                        <button type="submit" class="btn btn-secondary mr-3">Download Results as CSV</button>
                    </form>
                </div>
            </div>
            <div class="row ml-3 mb-3">
                <p>While the results show near text matches from across the web, this does necessarily not indicate
                    a
                    relationship or deliberate plagiarism between entities, as content may be licensed or quoted</p>
            </div>

            <div class="collapse show" id="collapsibleTable">

                <table id="content_table" class="table table-hover table-striped" style="width: 100%;">
                    <thead class="thead-light">
                        <tr>
                            <th>Domain</th>
                            <th>Title</th>
                            <th>Snippet</th>
                            <th>Engines</th>
                            <th>Match Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for link_data in results %}
                        <tr class="table-light">
                            <td>{{ link_data['domain'] }} <!-- Display source with icon based on conditions -->
                                {% if "EuVsDisinfo" in link_data['source'] %}
                                <i class="fas fa-exclamation-triangle text-warning" title="EUvsDisinfo Domain"></i>
                                {% elif "statemedia" in link_data['source'] %}
                                <i class="fas fa-globe text-primary" title="State Media Domain"></i>
                                {% elif "Pink Slime" in link_data['source'] %}
                                <i class="fas fa-tint text-danger" title="Pink Slime Domain"></i>
                                {% elif "Newsguard AI" in link_data['source'] %}
                                <i class="fas fa-brain text-success" title="Newsguard AI Domain"></i>
                                {% elif link_data['source'] %}
                                <i class="fas fa-bell" title="{{ link_data['source'] }}"></i>
                                {% endif %}
                            </td>

                            <td><a href="{{ link_data['url'] }}" target="_blank">{{ link_data['title'] }}</a>
                            </td>
                            <td>{{ link_data['snippet'] }}</td>
                            <!-- <td>{{ link_data['link_count'] }}</td>-->
                            <td>{{ link_data['engines']|join(', ') }}</td>
                            <!--<td>{{ link_data['domain_count'] }}</td>-->
                            <td>
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar"
                                        style="width: {{ link_data['score'] }}%;"
                                        aria-valuenow="{{ link_data['score'] }}" aria-valuemin="0" aria-valuemax="100">
                                        {{ link_data['score'] }}%</div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% endif %}
            <!-- Section for Indicators and Matches Tables -->
            {% if indicators_df %}
            <div class=" row mt-5">
                <div class="col-md-8 ">
                    <h2>What makes these site(s) unique? (Indicators)</h2>
                </div>
                <div class="col-md-4 ">
                    <button class="btn btn-primary float-right" type="button" data-toggle="collapse"
                        data-target="#collapsibleIndicatorTable" aria-expanded="false"
                        aria-controls="collapsibleIndicatorTable">
                        Show/Hide Table
                    </button>
                </div>
            </div>

            <p>Indicators are technical elements that can be used to identify relationships between websites. The
                table
                below shows all indicators for the specified domain(s). </p>

            <div class="progress" style="height: 25px;">
                {% for tier, count in indicator_summary.items() %}

                {% if tier == '1' %}
                <div class="progress-bar bg-success" role="progressbar" style="width: {{count}}%"
                    aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                    }}%</div>
                {% elif tier == '2' %}
                <div class="progress-bar bg-warning text-dark" role="progressbar" style="width: {{count}}%"
                    aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                    }}%</div>
                {% else %}
                <div class="progress-bar bg-info" role="progressbar" style="width: {{count}}%" aria-valuenow="{{count}}"
                    aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                    }}%</div>

                {% endif %}
                {% endfor %}

            </div>
            <div class="mt-3 collapse show" id="collapsibleIndicatorTable">
                <table id="indicators_table" class="table table-hover table-striped " style="width:100%">
                    <thead class="thead-light">
                        <tr>
                            <th>Domain Name</th>
                            <th>Indicator Type</th>
                            <th>Indicator Content</th>
                        </tr>
                    </thead>
                    <tbody>


                        {% for row in indicators_df %}
                        {% if row['indicator_type'][0] == '1' %}
                        <tr class="table-success">
                            {% elif row['indicator_type'][0] == '2' %}
                        <tr class="table-warning">
                            {% else %}
                        <tr class="table-info">
                            {% endif %}
                            <td>{{ row['domain_name'] }}</td>
                            <td>
                                {% if row['indicator_type'] in indicator_metadata %}
                                <div data-toggle="popover" data-trigger="focus"
                                    title="{{ indicator_metadata[row['indicator_type']].name }}"
                                    data-content="{{ indicator_metadata[row['indicator_type']].description }} {{ indicator_metadata[row['indicator_type']].interpretation }}"
                                    tabindex="0" role="button">
                                    <strong>{{ row['indicator_type'] }} ({{
                                        indicator_metadata[row['indicator_type']].name }})
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                                            <path
                                                d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                            <path
                                                d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" />
                                        </svg>
                                    </strong>
                                </div>
                                {% else %}
                                {{ row['indicator_type'] }}
                                {% endif %}
                            </td>
                            <td>{{ row['indicator_content'] }}</td>

                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
            </div>
            {% endif %}
            {% if matches_df %}
            <div class=" row mt-5">
                <div class="col-md-8 ">
                    <h2>How are these site(s) similar to others? (Matches)</h2>
                </div>
                <div class="col-md-4 ">
                    <button class="btn btn-primary float-right" type="button" data-toggle="collapse"
                        data-target="#collapsibleMatchesTable" aria-expanded="false"
                        aria-controls="collapsibleMatchesTable">
                        Show/Hide Table
                    </button>
                </div>
            </div>

            <p>Matches are pairs of domain names that have been identified as having identical or > 90% matches
                where an
                indicator is a list. The table below shows all matches for the specified domain(s).</p>
            <div class="progress" style="height: 25px;">
                {% for tier, count in matches_summary.items() %}

                {% if tier == '1' %}
                <div class="progress-bar bg-success" role="progressbar" style="width: {{count}}%"
                    aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                    }}%</div>
                {% elif tier == '2' %}
                <div class="progress-bar bg-warning text-dark" role="progressbar" style="width: {{count}}%"
                    aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                    }}%</div>
                {% else %}
                <div class="progress-bar bg-info" role="progressbar" style="width: {{count}}%" aria-valuenow="{{count}}"
                    aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                    }}%</div>
                {% endif %}
                {% endfor %}
            </div>

            <div class="mt-3 collapse show" id="collapsibleMatchesTable">
                <table id="matches_table" class="table table-hover table-striped" style="width:100%">
                    <thead class="thead-light">
                        <tr>
                            <th>Primary Domain Name</th>
                            <th>Matching Domain Name</th>
                            <th>Match Type</th>
                            <th>Match Value</th>
                        </tr>
                    </thead>
                    <tbody>

                        {% for row in matches_df %}
                        {% if row['match_type'][0] == '1' %}
                        <tr class="table-success">
                            {% elif row['match_type'][0] == '2' %}
                        <tr class="table-warning">
                            {% else %}
                        <tr class="table-info">
                            {% endif %}
                            <td>{{ row['domain_name_x'] }}</td>
                            <td>{{ row['domain_name_y'] }}</td>
                            <td>
                                {% if row['match_type'] in indicator_metadata %}
                                <div data-toggle="popover" data-trigger="focus"
                                    title="{{ indicator_metadata[row['match_type']].name }}"
                                    data-content="{{ indicator_metadata[row['match_type']].description }} {{ indicator_metadata[row['match_type']].interpretation }}"
                                    tabindex="0" role="button">
                                    <strong>{{ row['match_type'] }} ({{ indicator_metadata[row['match_type']].name
                                        }})
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                                            <path
                                                d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                            <path
                                                d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" />
                                        </svg>
                                    </strong>
                                </div>
                                {% else %}
                                {{ row['match_type'] }}
                                {% endif %}
                            </td>
                            <td>{{ row['match_value'] }}
                                {% if row['matched_on'] and row['matched_on'] is not none %} | {{ row['matched_on']
                                }}{%
                                endif %}
                            </td>
                        </tr>
                        {% endfor %}

                    </tbody>

                </table>
            </div>
            {% endif %}
        </div>
    </div>
    <div class="card mr-5 ml-5 mt-5">
        <div class="card-body">
            <div class="row">

                <div class="col-md-3">
                    <h5 class="card-title">Sponsoring Organizations</h5>
                </div>
                <div class="col-md-9">
                    <h5 class="card-title">Implementing Organizations</h5>
                </div>

            </div>
            <div class="row">
                <div class="col-md-3">

                    <div class="row">
                        <a href="https://gulbenkian.pt/emifund/" rel="nofollow">
                            <img src="https://camo.githubusercontent.com/4644af047750ba3f45a2f3efcf9f746857215547882628e6e2a34ca806cc72ac/68747470733a2f2f7365637572696e6764656d6f63726163792e676d6675732e6f72672f77702d636f6e74656e742f75706c6f6164732f323032342f30322f454d49465f486f72697a6f6e74616c5f6c6f676f5f426c61636b2e706e67"
                                alt="MJRC Logo" height="256"
                                data-canonical-src="https://securingdemocracy.gmfus.org/wp-content/uploads/2024/02/EMIF_Horizontal_logo_Black.png"
                                style="width: 100%;height:auto">
                        </a>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="row">
                        <div class="col-md-4 mt-5">
                            <a href="https://securingdemocracy.gmfus.org/" rel="nofollow">
                                <img src="https://securingdemocracy.gmfus.org/wp-content/uploads/2023/05/ASD-Logo.png"
                                    alt="ASD Logo"
                                    data-canonical-src="https://securingdemocracy.gmfus.org/wp-content/uploads/2020/02/ASD_Logo_Black.png"
                                    style="width: 100%;height:auto">
                            </a>
                        </div>
                        <div class="col-md-4">
                            <a href="https://www.isdglobal.org/" rel="nofollow">
                                <img src="https://securingdemocracy.gmfus.org/wp-content/uploads/2024/03/ISD-logo-ISD-Red.png"
                                    alt="ISD Logo"
                                    data-canonical-src="https://securingdemocracy.gmfus.org/wp-content/uploads/2020/02/ISD_Logo_Black.png"
                                    style="width: 100%;height:auto"></a>
                        </div>
                        <div class="col-md-4">
                            <a href="https://www.uva.nl/en" rel="nofollow">
                                <img src="https://securingdemocracy.gmfus.org/wp-content/uploads/2024/03/uva-logo-uvamerken_eng-1406x236-300dpi.png"
                                    alt="UvA Logo"
                                    data-canonical-src="https://securingdemocracy.gmfus.org/wp-content/uploads/2020/02/UvA_Logo_Black.png"
                                    style="width: 100%;height:auto"></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                The sole responsibility for any content supported by the European Media and Information Fund lies with
                the author(s) and it may not necessarily reflect the positions of the EMIF and the Fund Partners, the
                Calouste Gulbenkian Foundation and the European University Institute.
            </div>
        </div>
    </div>
    <div id="gdprConsentModal" class="modal" tabindex="-1" role="dialog"
        style="display:none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">GDPR Compliance Notice</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>The Information Laundromat tool is committed to protecting and respecting your privacy in
                        compliance
                        with the General Data Protection Regulation (GDPR). This disclaimer outlines the nature of the
                        data
                        processing activities conducted by our tool. Selecting 'Accept' consents to the data collection
                    </p>
                    <h4 id="data-collection-and-use">Data Collection and Use</h4>
                    <p>The Information Laundromat tool collects data through two forms, as part of its functions:
                        Content
                        Similarity Search and Domain Forensics Matching.</p>
                    <ul>
                        <li>
                            <p><strong>Content Similarity Search</strong>: This function processes URLs and text
                                snippets
                                provided by the user to detect occurrences of the given text across various websites.
                            </p>
                        </li>
                        <li>
                            <p><strong>Domain Forensics Matching</strong>: This function processes a domain URL and
                                analyzes
                                aspects of website architecture, design, and usage to identify unique indicators.</p>
                        </li>
                    </ul>
                    <p>Additional dataIPs, pages visited, and time of visitare collected automatically as part of
                        website analytics and logging. Logs are deleted after 30 days and analytics are anonymized.</p>
                    <h4 id="purpose-of-processing">Purpose of Processing</h4>
                    <p>The form data and results are collected and are solely used for the purpose of usage analytics
                        and
                        potential corpus expansion. </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="gdprReject">Reject</button>
                    <button type="button" class="btn btn-primary" id="gdprAccept">Accept</button>
                </div>
            </div>
        </div>
    </div>
    <canvas class="background"></canvas>
</body>
<style>
    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(128, 128, 128, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    .loading-spinner {
        top: 25%;
        text-align: center;
    }

    table {
        table-layout: fixed;
        width: 100%;
    }

    td {
        word-wrap: break-word;
        white-space: normal;
    }

    .highlight-gdelt {
        background-color: lightgreen;
    }

    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
        background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
        background-color: #ccc;
    }

    .card {
        color: #333;
    }

    .bg-dark-gray {
        background-color: #333;
    }

    .text-light-gray {
        color: #aaa;
    }

    .card-text {
        color: #333;
    }

    .tab-active,
    .tab-inactive {
        padding: 0.75rem 1.25rem;
        display: block;
        width: 100%;
        text-align: center;
    }

    .tab-active {
        background-color: #fff;
        /* Active tab with default background */
        color: #333;
        /* Text color for active tab */
    }

    .tab-inactive {
        background-color: #555;
        /* Inactive tab with darker background */
        color: #fff;
        /* Text color for inactive tab */

    }

    .nav-tabs .nav-item.show .nav-link,
    .nav-tabs .nav-link.active {
        color: #495057;
        background-color: #fff;
        border-color: #dee2e6 #dee2e6 #fff;
    }

    .nav-link {
        background-color: #555;
        color: #fff;
        border: none;
    }

    .nav-link:hover {
        background-color: #555;
        color: #fff;
        border: none;
    }

    .nav-tabs {
        border-bottom: none;
    }

    .info-dot {
        display: inline-block;
        margin-left: 10px;
        cursor: pointer;
    }

    /* Custom styles for the popover */
    .popover {
        max-width: 100%;
        /* Max width of the popover */
    }

    /* Larger font size for the popover content */
    .popover-body {
        font-size: 1rem;
        /* Adjust font size as needed */
    }

    /* Ensure info icon is aligned with the input */
    .input-group-text {
        display: flex;
        align-items: center;
    }

    /* Style for info icon */
    .fas.fa-info-circle {
        cursor: pointer;
        /* Change cursor to indicate it's clickable */
    }

    .caret {
        display: none;
    }

    .btn-group .multiselect {
        border: 1px solid #ced4da;
    }

    .card-body-400 {
        min-height: 400px;
        overflow-y: auto;
    }

    table a {
        color: #45648f;
    }

    table a:hover {
        color: #45648f;
    }

    body {
        margin: 0;
        padding: 0;
    }

    .background {
        position: absolute;
        display: block;
        top: 0;
        left: 0;
        z-index: -1;
        opacity: 30%;

    }

    #dynamic-content span {
        display: inline-block;
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
        /* Smooth transition for the opacity change */
    }

    .top-nav a {
        color: #fff;
    }

    .top-nav a:hover {
        color: lightgray;

    }
    @keyframes pulseAnimation {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
    }
    .pulse-effect {
        animation: pulseAnimation 2s infinite;
    }
</style>

</html>
<!DOCTYPE html>
<html lang="en">


<head>
    <link rel="shortcut icon" type="image/x-icon"
        href="data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAeFQYA+/v7AAwKAAAZEQAAGRACABsRAAAqHQMA/f39ABsTAgAcEwIAYlpNAB0TAgAfFAAA9vb2ABUNAAAWDQAA////AC4fBQD9/P4A/v38AB8WAgAZEQUAHRMBAAAA/wAhGAQAKx0BAB8VAwAYDwEADAgBACofAwAUDAAA//7/AC0fAwApHAIAKRsEACEWAAAaEgEAHBIBABYPAAAtIQUACwgAAPz+/gANBwIAFAsBAP7+/gD//v4ALR4EACMYAgD8+/0A/wANAB4UAwAgFQEADwsAAPb2+QAcEgAAEwsAAC8lEAD+/f8AIBcDAAAAHAAKBAAAJxoEAC8eAwD5+fkAHhQCACAVAAAZEQEAIBQCADEjBgAzIwYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPCooAjQ0NDQ0NjY2Njs2NhwCLCwsLCwsLCwsLDssLDYCNCwsLCwsLCwsLDssECw2NCssLCwsAwMDNjssASw2NjcOLCw7Aw0sLDUsLCw7Dh4ODywsAz82NjY2LCwDLBsODkIsAywVDEEWFhYsAxAEJhsDLAMsAzsxOzszLAMQAxsDJCw6LAM7OxcDAywDEAkEBUAsIywGOzsDAxkQLxBAAyU6MDA9ECcDRUQsISwQGiUyGDkHOx0sLBATIDsSEEALCxoQEBA5Awo4AywsEBBDCwgUEAAJAxAQHzkQEBAQQyQDQBAiLhEQAykDED4GEEAEDiUtEBAQEBAQEBAQEBAlJgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Information Laundromat</title>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.2/js/dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.1/js/dataTables.buttons.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.dataTables.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.html5.js"></script>
    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.bootstrap4.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particlesjs/2.2.3/particles.min.js"></script>

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">

    <script src="https://www.google.com/recaptcha/api.js?render=6LfmDgAqAAAAAJNH_BIJwpQqjUHhNFnk8grSKrNW"></script>

    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.bootstrap4.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link href="https://use.fontawesome.com/releases/v5.0.1/css/all.css" rel="stylesheet">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YC7N6ZZD7P"></script>
    <script>
        grecaptcha.ready(function() {
            grecaptcha.execute('6LfmDgAqAAAAAJNH_BIJwpQqjUHhNFnk8grSKrNW', {action: 'submit'}).then(function(token) {
                // You can then use this token to verify the captcha response server-side
                var recaptchaResponse1 = document.getElementById('recaptchaResponse1')
                var recaptchaResponse2 = document.getElementById('recaptchaResponse2')

                recaptchaResponse1.value = token;
                recaptchaResponse2.value = token;
            });
        });
      </script>
    <script>

        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-YC7N6ZZD7P');
    </script>
    <script>
        $(function () {
            $('[data-toggle="popover"]').popover({ trigger: "hover" })
        })
        window.onload = function () {
            Particles.init({
                selector: '.background',
                color: ['#DA0463', '#C2D3FC', '#F5F3CE'],
                speed: 0.3,
                connectParticles: true,
                minDistance: 130,
            });
        };

        // This function is triggered when the "View Links" button is clicked
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('.toggle-links').forEach(function (button) {
                button.addEventListener('click', function () {
                    const linkList = button.parentElement.parentElement.nextElementSibling.querySelector('.link-list');
                    linkList.style.display = linkList.style.display === 'none' ? 'table' : 'none';
                });
            });
        });
        // This function is triggered when the "Fingerprint" button is clicked
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('.submit-fingerprint').forEach(function (button) {
                button.addEventListener('click', function () {
                    var url = this.getAttribute('data-url'); // Get the URL from the data attribute of the button
                    var form = document.querySelector('form[action="/fingerprint"]'); // Find the fingerprint form
                    form.querySelector('#url').value = url; // Set the URL into the input field
                    form.submit(); // Submit the form
                });
            });
        });
        document.addEventListener('DOMContentLoaded', function () {
            // Select the forms by class or id or tag, e.g., 'form' to target all forms
            document.querySelectorAll('form').forEach(function (form) {
                form.addEventListener('submit', function () {
                    // Show the loading icon
                    if (form.id !== 'batch-search-content' && form.id !== 'batch-search-metadata') {
                        document.getElementById('loading').style.display = 'flex';
                    }
                    else {
                        document.getElementById('file-download-warning').style.display = 'block';
                    }
                    // Optionally disable the submit button to prevent multiple submissions
                    this.querySelector('button[type="submit"]').disabled = true;
                });
            });
        });
        document.addEventListener('DOMContentLoaded', function () {
            var matchesTable = document.getElementById('matches_table');
            var contentTable = document.getElementById('content_table');

            var scrollToResults = document.getElementById('scroll-to-results');

            if ((matchesTable && scrollToResults) || (contentTable && scrollToResults)) {
                scrollToResults.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('autoFillMirrorButton').addEventListener('click', function () {
                // Set the URL input value
                document.getElementById('url').value = 'https://actualidad.rt.com,https://actualidad-rt.com,https://esrt.online,https://esrt.press';

                // Toggle checkboxes
                document.getElementById('run_urlscan').checked = true;
                document.getElementById('internal_only').checked = true;
                $('#myTab a[href="#metadataTab"]').click();
                var searchButton = document.getElementById('metadataSearchButton');
                searchButton.classList.add('pulse-effect');
                searchButton.addEventListener('click', function () {
                    searchButton.classList.remove('pulse-effect');
                });
            });
        });
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('autoFillRTLaunderingButton').addEventListener('click', function () {
                // Set the content input value
                document.getElementById('contentToSearch').value = 'https://www.rt.com/russia/597937-zelensky-no-mandate-election/';

                $('#myTab a[href="#contentTab"]').click();
                var searchButton = document.getElementById('contentSearchButton');
                searchButton.classList.add('pulse-effect');
                searchButton.addEventListener('click', function () {
                    searchButton.classList.remove('pulse-effect');
                });
            });
        });
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('autoFillIntelButton').addEventListener('click', function () {
                // Set the URL input value
                document.getElementById('url').value = 'https://globalresearch.ca/';

                // Toggle checkboxes
                document.getElementById('run_urlscan').checked = true;
                $('#myTab a[href="#metadataTab"]').click();
                var searchButton = document.getElementById('metadataSearchButton');
                searchButton.classList.add('pulse-effect');
                searchButton.addEventListener('click', function () {
                    searchButton.classList.remove('pulse-effect');
                });

            });
        });

        $(document).ready(function () {

            $('#content_table').DataTable(
                {
                    responsive: true,
                    pageLength: 50,
                    autoWidth: false,
                    columnDefs: [
                        { targets: 0, width: "20%" },
                        { targets: 1, width: "25%" },
                        { targets: 2, width: "35%" },

                        { targets: 3, width: "10%" },       
                        { targets: 4, width: "7.5%" },
                        { targets: 5, width: "2.5%", orderable: false, searchable: false}
                        

                    ],
                    layout: {
                        topStart: {
                            buttons: ['pageLength', 'copy', 'csv', 'excel']
                        },
                    },
                    order: [[4, 'desc']]
                });
            var indicatorsTable = $('#indicators_table').DataTable(
                {
                    responsive: true,
                    pageLength: 50,
                    autoWidth: false,
                    columnDefs: [
                        { targets: 0, width: "5%" },

                        { targets: 1, width: "20%" },
                        { targets: 2, width: "30%" },
                        { targets: 3, width: "45%" }
                    ],
                    layout: {
                        topStart: {
                            buttons: ['pageLength', 'copy', 'csv', 'excel']
                        },
                    },
                    order: [[2, 'asc'], [1, 'asc']]
                });
            $('#matches_table').DataTable(
                {
                    responsive: true,
                    pageLength: 50,
                    autoWidth: false,
                    columnDefs: [
                        { targets: 0, width: "15%" },
                        { targets: 1, width: "15%" },
                        { targets: 2, width: "30%" },
                        { targets: 3, width: "40%" },

                    ],
                    layout: {
                        topStart: {
                            buttons: ['pageLength', 'copy', 'csv', 'excel']
                        },
                    },
                    order: [[2, 'asc'], [0, 'asc'], [1, 'asc']]
                }
            );
            $('[data-toggle="popover"]').popover({
                placement: 'top',
                html: true
            });
            $('#search_engines').multiselect({
                includeSelectAllOption: true,
            });
            $.fn.dataTable.ext.search.push(
                function (settings, data, dataIndex) {
                    var tier = $('#indicators_table').attr('data-tier-filter');
                    if (!tier) return true; // no filter applied

                    // Assuming the indicator type is in the first column
                    var cellHtml = data[0];
                    var matches = cellHtml.match(/(\d+)-[a-z]+/i); // Regex to extract the tier indicator
                    if (!matches) return false; // If no match is found, don't display the row

                    var type = matches[0];
                    return type.startsWith(tier + '-');
                }
            );

            $('#myTab a').on('click', function (e) {
                e.preventDefault();
                // Remove 'active' class and 'd-none' from all tab contents
                $('.tab-pane').removeClass('active show').addClass('d-none');


                // Add 'active' class to current tab's content and remove 'd-none'
                $($(this).attr('href')).addClass('active show').removeClass('d-none');

                // Change the active state on the tabs
                $('#myTab .nav-link').removeClass('active show');
                $(this).addClass('active show');
            });
            $('#file').on('change', function () {
                //get the file name
                var fileName = $(this).val().split('\\').pop();
                //replace the "Choose a file" label
                $(this).next('.custom-file-label').html(fileName);
            })
            $('#fingerprint-file').on('change', function () {
                //get the file name
                var fileName = $(this).val().split('\\').pop();
                //replace the "Choose a file" label
                $(this).next('.custom-file-label').html(fileName);
            })
            $('#url').on('input', function () {
                var urls = $(this).val().split(',');
                var allValid = urls.every(function (url) {
                    return url.trim().startsWith('https://');
                });

                var warningElement = $('#urlWarning');

                if (!allValid) {
                    warningElement.text('All URLs must start with "https://". Separate multiple URLs with a comma.'); // Set the warning message
                    warningElement.show(); // Show the Bootstrap alert
                } else {
                    warningElement.hide(); // Hide the Bootstrap alert if all URLs are valid
                }
            });
            // == === == GDPR consent modal 
            // Function to check the consent cookie
            function checkConsent() {
                return document.cookie.split(';').some(function (item) {
                    return item.trim().startsWith('gdprConsent=');
                });
            }

            // Function to set the consent cookie
            function setConsent(value) {
                if (value) {
                    document.cookie = "gdprConsent=" + value + "; path=/; max-age=" + 60 * 60 * 24 * 365;
                }
            }

            // Show modal if consent not given
            if (!checkConsent()) {
                $('#gdprConsentModal').show();

                // Auto-reject after 30 seconds if no action is taken
                setTimeout(function () {
                    if ($('#gdprConsentModal').is(':visible')) {
                        setConsent(false);
                        $('#gdprConsentModal').fadeOut();
                    }
                }, 30000); // 30 seconds
            }

            // Accept button handler
            $('#gdprAccept').click(function () {
                setConsent(true);
                $('#gdprConsentModal').hide();
            });

            // Reject button handler
            $('#gdprReject').click(function () {
                setConsent(false);
                $('#gdprConsentModal').hide();
            });
            //== === end GDPR consent modal 
            // == === == Rotating Text Animation

            const verbs = ["Discover", "Investigate", "Track"];
            const nouns = [
                "content relationships",
                "content laundering",
                "shared metadata",
                "information networks",
                "site architecture"
            ];


            function getRandomElement(arr, current) {
                let randomElement = current;
                while (randomElement === current) {
                    randomElement = arr[Math.floor(Math.random() * arr.length)];
                }
                return randomElement;
            }
            function swapVerb() {
                let currentVerb = document.getElementById('lead-verb').textContent;
                let nextVerb = getRandomElement(verbs, currentVerb);

                document.getElementById('lead-verb').style.opacity = '0';

                setTimeout(function () {
                    document.getElementById('lead-verb').textContent = nextVerb;
                    document.getElementById('lead-verb').style.opacity = '1';
                }, 500);
            }
            function swapNoun() {
                let currentNoun = document.getElementById('lead-noun').textContent;
                let nextNoun = getRandomElement(nouns, currentNoun);

                document.getElementById('lead-noun').style.opacity = '0';

                setTimeout(function () {
                    document.getElementById('lead-noun').textContent = nextNoun;
                    document.getElementById('lead-noun').style.opacity = '1';
                }, 500);
            }

            // Start the swapping with verbs and set intervals
            swapVerb();
            setInterval(function () {
                // Swap verb, wait 5 seconds, then swap noun, to ensure one changes at a time
                swapVerb();
                setTimeout(swapNoun, 3000);
            }, 6000);
            // == === == End Rotating Text Animation
            function onContentSubmit(token) {
                document.getElementById("content-search-form").submit();
            }
            function onMetadataSubmit(token) {
                document.getElementById("metadata-search-form").submit();
            }
        });
    </script>
</head>

<body class="bg-dark-gray">

    <div id="loading" class="loading-overlay" style="display: none;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="250"
            height="250" style="shape-rendering: auto; display: block; background: transparent;"
            xmlns:xlink="http://www.w3.org/1999/xlink">
            <g>
                <g transform="translate(50 50)">
                    <g transform="scale(0.5)">
                        <g transform="translate(-50 -50)">
                            <g>
                                <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite"
                                    values="0 50 50;360 50 50" keyTimes="0;1" dur="1.25s"></animateTransform>
                                <path fill-opacity="0.5" fill="#000000" d="M50 50L50 0A50 50 0 0 1 100 50Z"></path>
                            </g>
                            <g>
                                <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite"
                                    values="0 50 50;360 50 50" keyTimes="0;1" dur="1.6666666666666665s">
                                </animateTransform>
                                <path fill-opacity="0.5" fill="#f47660" d="M50 50L50 0A50 50 0 0 1 100 50Z"
                                    transform="rotate(90 50 50)"></path>
                            </g>
                            <g>
                                <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite"
                                    values="0 50 50;360 50 50" keyTimes="0;1" dur="2.5s"></animateTransform>
                                <path fill-opacity="0.5" fill="#f8b26a" d="M50 50L50 0A50 50 0 0 1 100 50Z"
                                    transform="rotate(180 50 50)"></path>
                            </g>
                            <g>
                                <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite"
                                    values="0 50 50;360 50 50" keyTimes="0;1" dur="5s"></animateTransform>
                                <path fill-opacity="0.5" fill="#f9dd7f" d="M50 50L50 0A50 50 0 0 1 100 50Z"
                                    transform="rotate(270 50 50)"></path>
                            </g>
                        </g>
                    </g>
                </g>
                <g></g>
            </g><!-- [ldio] generated by https://loading.io -->
        </svg>
    </div>
    </div>
    <!--  -->
    <div class="main-page">
        <div class="ml-2 mr-2 text-light-gray">
            <div class="py-5">

                <div class="row top-nav mb-4">
                    <div class="col-md-8">
                        <h2 class="lead"> <img
                                src="https://securingdemocracy.gmfus.org/wp-content/uploads/2024/04/il_logo_nobg.png"
                                class="img-fluid" alt="logo" style="max-width: 50px;">The Information Laundromat
                        </h2>

                    </div>
                    <div class="col-md-4 mt-3">
                        <div class="row">
                            <div class="col-sm">
                                <div class="text-left">
                                    <h2 class="lead">
                                        <a href="/"><strong>Search</strong></a>
                                    </h2>
                                </div>
                            </div>
                            <div class="col-sm">
                                <div class="text-left">
                                    <h2 class="lead">
                                        <a href="{{ url_for('about') }}">About</a>
                                    </h2>
                                </div>
                            </div>
                            <div class="col-sm">
                                <div class="text-left">
                                    <h2 class="lead">
                                        <a href="{{ url_for('indicators_gui') }}">Indicators</a>
                                    </h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-4 mb-5 mt-3">
                        <div class="col text-center" id=dynamic-content>
                            <h3 class="display-4 d-none d-sm-block">
                                <span id="lead-verb">Discover </span>
                                <span id="lead-noun">content relationships</span> from across the infosphere
                            </h3>
                            <h2 class="lead mt-3"> The Information Laundromat is a lead generation tool used to
                                determine if
                                and how websites share architecture and content. It provides two core functions: content
                                similarity and domain forensics matching</h2>
                        </div>
                    </div>
                    <div class="col-lg-8 mb-3">
                        {% if error_message %}
                        <div class="alert alert-danger" role="alert">
                            {{ error_message }}
                        </div>
                        {% endif %}
                        <div class="card">
                            <div class="card-header p-0 text-center">
                                <ul class="nav nav-tabs" id="myTab" role="tablist">
                                    <li class="nav-item col-6 p-0">
                                        <a class="nav-link active" data-toggle="tab" href="#contentTab">
                                            <h4>Content Similarity</h4>
                                        </a>
                                    </li>
                                    <li class="nav-item col-6 p-0">
                                        <a class="nav-link" data-toggle="tab" href="#metadataTab">
                                            <h4>Metadata Similarity</h4>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-body card-body-400">
                                <div id="contentTab" class="container tab-pane fade active show">
                                    <form method="POST" action="/content-search" class="tabcontent" id="content-search-form" >
                                        <input type="hidden" name="recaptcha_response" id="recaptchaResponse1">

                                        <div class="row mt-1">
                                            <div class="col-sm">
                                                <p class="card-text">
                                                    Enter a URL, the title, or a snippet of text from an article to search for instances of reposted or similar articles that appear on search engines, the GDELT database, or a plagiarism detection tool. Searching by URL automatically parses the title and content, but this feature does not work on all sites. Title and content can be specified using _title: or _content:. Accuracy varies with text length and uniqueness; common phrases like "Vladimir Putin" yield less precise results.
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row mt-3 ">
                                            <div class="col-sm input-group">

                                                <textarea type="text" rows=2 class="form-control" name="contentToSearch"
                                                    id="contentToSearch" aria-describedby="basic-addon2"
                                                    placeholder="Add article link, title or a text snippet"
                                                    required></textarea>
                                                <div class="input-group-append">
                                                    <span class="input-group-text" id="basic-addon2">
                                                        <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                            data-content="Enter the full url, e.g. https://tech.cnn.com/article-title.html, when using URL search"></i>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row mt-3">
                                            <div class="col-sm">
                                                Country:
                                                <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                    data-content="Select where to geolocate searches (applicable for search engines only)"></i>
                                            </div>
                                            <div class="col-sm">
                                                Language:
                                                <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                    data-content="Select the results language filter (note: this does not change the language of the query)"></i>
                                            </div>
                                            <div class="col-sm">
                                                Engines:
                                                <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                    data-content="Select one or more search engines or databases"></i>
                                            </div>
                                            <div class="col-sm">
                                            </div>
                                        </div>
                                        <div class="row mt-1">
                                            <div class="col-sm input-group">

                                                <select class="form-control" name="country" id="country"
                                                    aria-describedby="basic-addon3">
                                                    {% for code, name in countries.items() %}
                                                    <option value="{{ code }}" {% if code=='us' %}selected{% endif %}>{{
                                                        name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>

                                            </div>

                                            <div class="col-sm input-group">

                                                <select class="form-control" name="language" id="language"
                                                    aria-describedby="basic-addon4">
                                                    {% for code, name in languages.items() %}
                                                    <option value="{{ code }}" {% if code=='en' %}selected{% endif %}>{{
                                                        name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>

                                            </div>

                                            <div class="col-sm input-group">
                                                <select class="form-control" multiple="multiple" name="search_engines"
                                                    id="search_engines">
                                                    {% for code, name in engines.items() %}
                                                    <option value="{{ code }}" {% if code=='all' %}selected{% endif %} selected>
                                                        {{
                                                        name
                                                        }}
                                                    </option>
                                                    {% endfor %}
                                                </select>

                                            </div>

                                            <div class="col-sm">
                                                <button class="btn btn-secondary btn-block"
                                                    id="contentSearchButton">Search</button>
                                            </div>
                                        </div>
                                    </form>
                                    <hr class="my-4">
                                    {% if current_user.is_authenticated %}
                                    <form method="POST" action="/batch-search-content" id="batch-search-content"
                                        enctype="multipart/form-data">

                                        <div class="row mt-3 ml-1">
                                            <h5 class="card-title">Batch Content Search</h5>
                                        </div>
                                        <div class="row mt-3 ml-1">
                                            The CSV for batch searches requires the following columns: combineOperator,
                                            (either AND or OR) language, (2
                                            letter code, e.g. en) country, (2 letter code, e.g. us), engines (comma
                                            separated list of search engines, e.g. google,bing), and your choice of
                                            EITHER
                                            url (full url, e.g. https://tech.cnn.com/article-title.html) OR titleQuery
                                            and
                                            contentQuery (text snippets).&nbsp;<a
                                                href="{{ url_for('download_content_csv_example') }}" download>Download
                                                the
                                                template here</a>.

                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-md-5 input-group">
                                                <div class="form-check form-check-inline">
                                                    <input type="file" class="custom-file-input" id="file" name="file">
                                                    <label class="custom-file-label" for="file">Content CSV</label>
                                                </div>
                                            </div>

                                            <div class="col-md-4 input-group">
                                                <input type="email" class="form-control" id="email" name="email"
                                                    aria-describedby="emailHelp"
                                                    placeholder="Email, e.g name@example.com" required>

                                            </div>


                                            <div class="col-md-3">
                                                <button class="btn btn-secondary btn-block"
                                                data-action='submit' 
                                                >Search</button>
                                            </div>

                                        </div>
                                    </form>
                                    {% else %}
                                    <div class=" ml-3">
                                        <p>Please <a href="{{ url_for('login_gui') }}">log in or register</a> to run
                                            batch searches. Contact us at info [at] securingdemocracy.org to obtain a
                                            registration code.</p>
                                    </div>
                                    {% endif %}
                                </div>
                                <div id="metadataTab" class="container tab-pane fade d-none">
                                    <form method="POST" action="/url-search" id="metadata-search-form" class="tabcontent-fingerprint">
                                        <input type="hidden" name="recaptcha_response" id="recaptchaResponse2">

                                        <div class="row mt-1">
                                            <div class="col-sm">
                                                <p class="card-text">
                                                    Enter one or more domains, separated by commas, to display technical information about the domain(s). This function uncovers indicators (such as Google analytics ID, IP address, CSS class, etc.) that make a site unique and that can be used to discover commonalities between and among domains. Include https:// and a subdomain, if desired. (e.g. https://tech.cnn.com).
                                                </p>
                                            </div>

                                        </div>
                                        <div class="row mt-3 ">
                                            <div id="urlWarning" class="alert alert-warning" role="alert"
                                                style="display: none;">
                                                <!-- Warning message will be inserted here -->
                                            </div>
                                        </div>
                                        <div class="row mt-3 ">
                                            <div class="col-sm input-group">
                                                <input type="text" class="form-control" aria-describedby="basic-addon6"
                                                    placeholder="Enter one or more domains/link" name="url" id="url"
                                                    required>
                                                <div class="input-group-append">
                                                    <span class="input-group-text" id="basic-addon6">
                                                        <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                            data-content="Enter the full url, e.g. https://tech.cnn.com/article-title.html; this feature doesn't work on all sites, run a title/content query if prompted"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-sm input-group">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="run_urlscan"
                                                        name="run_urlscan" value="no">
                                                    <label class="form-check-label" for="run_urlscan">Run URLSCAN
                                                    </label>
                                                    <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                        data-content="May take up to 2 minutes"></i>
                                                </div>
                                            </div>

                                            <div class="col-sm input-group">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="internal_only"
                                                        name="internal_only" value="option1">
                                                    <label class="form-check-label" for="in-group">In-group matching
                                                    </label>
                                                    <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                        data-content="Match within a provided list of multiple URLS"></i>
                                                </div>
                                            </div>
                                            <div class="col-sm">
                                            </div>
                                            <div class="col-sm">
                                                <button class="btn btn-secondary btn-block" 
                                                                                    
                                                    id="metadataSearchButton">Search</button>
                                            </div>
                                        </div>

                                    </form>
                                    <hr class="my-4">
                                    {% if current_user.is_authenticated %}
                                    <form method="POST" action="/batch-search-metadata" id="batch-search-metadata"
                                        enctype="multipart/form-data">
                                        <div class="row mt-3  ml-1">
                                            <h5 class="card-title">Batch Metadata Search</h5>
                                        </div>
                                        <div class="row mt-3  ml-1">
                                            Requires only one column: url. Must be a full url, e.g.
                                            https://tech.cnn.com/.&nbsp;<a
                                                href="{{ url_for('download_domain_metadata_example') }}" download>
                                                Download
                                                the template</a>.
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-md-6  input-group">
                                                <div class="form-check form-check-inline">
                                                    <input type="file" class="custom-file-input" id="fingerprint-file"
                                                        name="fingerprint-file">
                                                    <label class="custom-file-label" for="fingerprintCSV">Metadata
                                                        CSV</label>

                                                </div>
                                            </div>

                                            <div class="col-md-3 input-group">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="run_urlscan"
                                                        name="run_urlscan" value="no">
                                                    <label class="form-check-label" for="run_urlscan">Run URLSCAN
                                                    </label>
                                                    <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                        data-content="May take up to 2 minutes"></i>
                                                </div>
                                            </div>

                                            <div class="col-md-3 input-group">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="internal_only"
                                                        name="internal_only" value="option1">
                                                    <label class="form-check-label" for="in-group">In-group matching
                                                    </label>
                                                    <i class="fas fa-info-circle" data-trigger="hover" data-toggle="popover"
                                                        data-content="Match within a provided list of multiple URLS"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-md-6 input-group">
                                                <input type="email" class="form-control" id="email" name="email"
                                                    aria-describedby="emailHelp"
                                                    placeholder="Email, e.g name@example.com" required>

                                            </div>
                                            <div class="col-md-3">

                                            </div>

                                            <div class="col-md-3">
                                                <button class="btn btn-secondary btn-block">Search</button>
                                            </div>

                                        </div>
                                        <div id="file-download-warning" class="alert alert-warning mt-3" role="alert"
                                            style="display: none;">
                                            <strong>Warning!</strong> Downloading the results of a batch search may take
                                            a
                                            long
                                            time and may not be successful for large datasets. The results will be
                                            emailed
                                            to
                                            the provided email address.
                                        </div>
                                    </form>
                                    {% else %}
                                    <div>
                                        <p>Please <a href="{{ url_for('login_gui') }}">log in or register</a> to run
                                            batch searches. Contact us at info [at] securingdemocracy.org to obtain a
                                            registration code.</p>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <!-- 3 evenly spaced cards with usage scenarios written in them -->
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title" data-toggle="collapse" data-target="#collapseOne">Investigate
                                    Content Laundering
                                </h5>
                                <p id="collapseOne" class="collapse show card-text">
                                    Use the Laundromat to uncover websites republishing content from Russian state
                                    media.
                                    This function highlights articles that closely resemble the original sources,
                                    enabling analysis of content laundering at a large scale.
                                    A detailed report of the network involved is available below.

                                </p>
                            </div>
                            <div class="card-footer ">
                                <a href="https://securingdemocracy.gmfus.org/the-russian-propaganda-nesting-doll-how-rt-is-layered-into-the-digital-information-environment/"
                                    target="_blank" class="btn btn-secondary">Read Report</a>
                                <button type="button" id="autoFillRTLaunderingButton"
                                    class="btn btn-primary float-right">Try Search</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                
                                <h5 class="card-title" data-toggle="collapse" data-target="#collapseTwo">Uncover RT's
                                    Mirror Networks
                                </h5>
                                <p id="collapseTwo" class="card-text collapse show">
                                    The Institute for Strategic Dialogue has identified domains that are mirror images
                                    of RT
                                    websites, down to branding and code.
                                    Utilize the Laundromat's Metadata Similarity tool to detect common features across
                                    these
                                    mirrors.</p>
                                </p>
                            </div>
                            <div class="card-footer ">
                                <a href="https://www.isdglobal.org/digital_dispatches/rt-articles-are-finding-their-way-to-european-audiences-but-how/"
                                    target="_blank" class="btn btn-secondary">Read Report</a>
                                <button type="button" id="autoFillMirrorButton" class="btn btn-primary float-right">Try
                                    Search</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body ">
                                <h5 class="card-title" data-toggle="collapse" data-target="#collapseThree">Generate Open
                                    Source Intelligence Leads
                                </h5>
                                <p id="collapseThree" class="collapse show card-text">
                                    The Laundromat is also instrumental in producing OSINT leads regarding
                                    the construction, sponsorship, and social media linkages of websites, regardless of
                                    their content's provenance.
                                </p>
                            </div>
                            <div class="card-footer">
                                <button type="button" id="autoFillIntelButton" class="btn btn-primary float-right">Try
                                    Search</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>


            <div class="mt-4 ml-1 mr-1 mb-3">

                <h2>Interpreting the Laundromat Results <a href="{{ url_for('indicators_gui') }}"
                        class="btn btn-secondary float-right">View
                        All Indicators + Descriptions</a></h2>
                <div class="accordion" id="accordionAbout">
                    <div class="card">
                        <div class="card-header" id="headingOneAcc">

                            <h5 class="card-title"data-toggle="collapse"
                                    data-target="#collapseOneAcc" aria-expanded="true" aria-controls="collapseOneAcc">
                                    About the Laundromat Results
                                </button>
                            </h5>
                        </div>

                        <div id="collapseOneAcc" class="collapse show" aria-labelledby="headingOneAcc"
                            data-parent="#accordionAbout">
                            <div class="card-body">
                                Results from the Laundromat are generated by comparing the content and metadata of websites to identify similarities. For detailed help interpreting the results, please see the <a href="{{ url_for('indicators_gui') }}">About page.
                                </a></p>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="heading2Acc">
                            <h5 class="card-title" data-toggle="collapse"
                                    data-target="#collapseTwoAcc" aria-expanded="true" aria-controls="collapseTwoAcc">
                                    Interpreting Content Similarity
                            </h5>
                        </div>

                        <div id="collapseTwoAcc" class="collapse" aria-labelledby="heading2Acc"
                            data-parent="#accordionAbout">
                            <div class="card-body">
                                This tool compares headlines, text snippets, or URLs with results generated by search engines, databases, and plagiarism checkers to find similar texts. It filters out unrelated content and assigns a match score to gauge similarity. A score of 100% indicates a complete match between the queried text and a result, while a value of 0% indicates no match. While this scoring method is very accurate when querying a snippet of text, it is less accurate when querying URLs because websites often contain sidebars or other text on the page that is different from the original source, even if the article itself is identical. Scores of 50% or more typically mean a closer match, minimizing false positives. Accuracy varies with text length and uniqueness; common phrases like "Vladimir Putin" yield less precise results.
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="heading3Acc">
                            <h5 class="card-title" data-toggle="collapse"
                                    data-target="#collapseThreeAcc" aria-expanded="true" aria-controls="collapseThreeAcc">
                                    Interpreting Metadata Similarity
                                </button>
                            </h5>
                        </div>

                        <div id="collapseThreeAcc" class="collapse" aria-labelledby="heading3Acc"
                            data-parent="#accordionAbout">
                            <div class="card-body">
                                This function uncovers indicators (such as Google analytics IDs, IP addresses, CSS classes, etc.) that make a site unique and that can be used to discover commonalities between and among websites. These indicators are compared with other queried domains and a list of domains already processed by the tool to find similar items. It uses a three-tier system  to categorize the indicators based on their strength and reliability. (See the Indicators page for more information about the tier system). We urge caution, however, when interpreting metadata results. There are legitimate reasons why unrelated sites might share indicators in common, even tier one indicators. Indicators in common should therefore not be interpreted, without additional confirmation, as definitive proof of a relationship between two or more identified sites.  
                            <hr/>
                            For the metadata section, ChatGPT or other large language models (LLMs) can be used to help interpret the results. We suggest typing this prompt and copying the indicators table below using the 'Copy' button. Prompt: "Assist me in interpreting these results from an OSINT tool that uses domain forensics 'indicators' to identify potential aspects of the site that are unique or could assist in further OSINT investigations. Note good investigatory leads, social media, useful IDs, and indicators of how the website was made, as well as if an indicator could be misleading. Results:"
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div id="scroll-to-results"></div>
            <div class="row ml-1 mr-1 mt-3">
                {% if request is defined %}
                <div class="alert alert-warning w-100" role="alert">
                    You searched for:
                    {% if request.form['url'] is defined %}
                    <strong>{{ request.form['url'] }}</strong>
                    <!-- share this search button --> 
                    
                    <a href="https://informationlaundromat.com/url-search?url={{ request.form['url'] }}" target="_blank" class="btn btn-secondary btn-sm float-right" > Share this search <i class="fas fa-share-alt"></i></a>
                    {% endif %}
                    {% if request.form['contentToSearch'] is defined %}
                    <strong>{{ request.form['contentToSearch'] }}</strong>
                    <a href="https://informationlaundromat.com/content-search?contentToSearch={{request.form['contentToSearch']}}" target="_blank" class="btn btn-secondary btn-sm float-right"> Share this search <i class="fas fa-share-alt"></i></a>

                    {% endif %}
                </div>
                {% endif %}
            </div>
            <div class="mt-3 ml-2 mr-2">
                {% if results %}
                <div class="row mb-3">
                    <div class="col-md-8">
                        <h2>Results with similar titles or content</h2>
                    </div>


                    <div class="col-md-4 ">
                            <button class="btn btn-primary mr-3 float-right" type="button" data-toggle="collapse"
                                data-target="#collapsibleTable" aria-expanded="false" aria-controls="collapsibleTable">
                                Show/Hide Table
                            </button>
                        
                    </div>
                </div>
                <div class="row ml-3 mb-3">
                    <p>While the results show near text matches from across the web, this does necessarily not indicate
                        a
                        relationship or deliberate plagiarism between entities, as content may be licensed or quoted</p>
                </div>

                <div class="collapse show" id="collapsibleTable">

                    <table id="content_table" class="table table-hover table-striped" style="width: 100%;">
                        <thead class="thead-light">
                            <tr>
                                <th>Domain</th>
                                <th>Title</th>
                                <th>Snippet</th>
                                <th>Engines</th>
                                <th>Match %</th>
                                <th></th>

                            </tr>
                        </thead>
                        <tbody>
                            {% for link_data in results %}
                            <tr class="table-light">
                                <td ><a href="{{ link_data['domain'] }}" target="_blank">{{ link_data['domain'] }}</a> 
                                    {% if "EuVsDisinfo" in link_data['source'] %}
                                    <i class="fas fa-exclamation-triangle text-warning" title="EUvsDisinfo Domain"></i>
                                    {% elif "statemedia" in link_data['source'] %}
                                    <i class="fas fa-globe text-primary" title="State Media Domain"></i>
                                    {% elif "Pink Slime" in link_data['source'] %}
                                    <i class="fas fa-tint text-danger" title="Pink Slime Domain"></i>
                                    {% elif "Newsguard AI" in link_data['source'] %}
                                    <i class="fas fa-brain text-success" title="Newsguard AI Domain"></i>
                                    {% elif link_data['source'] %}
                                    <i class="fas fa-bell" title="{{ link_data['source'] }}"></i>
                                    {% endif %}
                                </td>

                                <td><a href="{{ link_data['url'] }}" target="_blank">{{ link_data['title'] }}</a>
                                </td>
                                <td>{{ link_data['snippet'] }}</td>
                                <!-- <td>{{ link_data['link_count'] }}</td>-->
                                <td>{{ link_data['engines']|join(', ') }}</td>
                                <!--<td>{{ link_data['domain_count'] }}</td>-->
                                <td>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar"
                                            style="width: {{ link_data['score'] }}%;"
                                            aria-valuenow="{{ link_data['score'] }}" aria-valuemin="0"
                                            aria-valuemax="100">
                                            {{ link_data['score'] }}%</div>
                                    </div>
                                </td>
                                <td>
                                    <a href="/url-search?url={{ link_data['domain'] }}" target="_blank"><i class="fas fa-soap"></i></a>
                                    
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% endif %}
                <!-- Section for Indicators and Matches Tables -->
                {% if indicators_df %}
                <div class=" row mt-5">
                    <div class="col-md-8 ">
                        <h2>What makes these site(s) unique? (Indicators)</h2>
                    </div>
                    <div class="col-md-4 ">
                        <button class="btn btn-primary float-right" type="button" data-toggle="collapse"
                            data-target="#collapsibleIndicatorTable" aria-expanded="false"
                            aria-controls="collapsibleIndicatorTable">
                            Show/Hide Table
                        </button>
                    </div>
                </div>

                <p>Indicators are technical elements that can be used to identify relationships between websites or as lead generators to investigate the possible ownership of websites. The table below shows all indicators for the specified domain(s).</p>

                <div class="progress" style="height: 25px;">
                    {% for tier, count in indicator_summary.items() %}

                    {% if tier == 1 %}
                    <div class="progress-bar bg-success" role="progressbar" style="width: {{count}}%"
                        aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                        }}%</div>
                    {% elif tier == 2 %}
                    <div class="progress-bar bg-warning text-dark" role="progressbar" style="width: {{count}}%"
                        aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                        }}%</div>
                    {% elif tier == 3 %}
                    <div class="progress-bar bg-info " role="progressbar" style="width: {{count}}%"
                        aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                        }}%</div>
                    {% else %}
                    <div class="progress-bar bg-light text-dark" role="progressbar" style="width: {{count}}%"
                        aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                        }}%</div>

                    {% endif %}
                    {% endfor %}

                </div>
                <div class="mt-3 collapse show" id="collapsibleIndicatorTable">
                    <table id="indicators_table" class="table table-hover table-striped " style="width:100%">
                        <thead class="thead-light">
                            <tr>
                                <th></th>
                                <th>Domain Name</th>
                                <th>Indicator Type</th>
                                <th>Indicator Content</th>
                            </tr>
                        </thead>
                        <tbody>


                            {% for row in indicators_df %}
                            {% if row['indicator_tier'] == 1 %}
                            <tr class="table-success">
                                {% elif row['indicator_tier'] == 2 %}
                            <tr class="table-warning">
                                {% elif row['indicator_tier'] == 3 %}
                            <tr class="table-info">
                                {% else %}
                            <tr class="table-light">
                                {% endif %}
                                <td data-sort="{{row['indicator_annotation']}}">
                                    {% if row['indicator_annotation'] == 'financial' %}
                                    <div data-toggle="popover" data-trigger="hover"
                                        data-content="This indicator is related to financial transactions or services."
                                        tabindex="0" role="button">
                                        <i class="fas fa-money-bill-wave"></i>
                                    </div>
                                    {% elif row['indicator_annotation'] == 'embedded' %}
                                    <div data-toggle="popover" data-trigger="hover"
                                        data-content="This indicator is extracted from an item embedded in the website's code."
                                        tabindex="0" role="button">
                                        <i class="fas fa-code"></i>
                                    </div>
                                    {% elif row['indicator_annotation'] == 'social_media' %}
                                    <div data-toggle="popover" data-trigger="hover"
                                        data-content="This indicator is related to social media or social media services."
                                        tabindex="0" role="button">
                                        <i class="fas fa-user-friends"></i>
                                    </div>
                                    {% elif row['indicator_annotation'] == 'tracking' %}
                                    <div data-toggle="popover" data-trigger="hover"
                                        data-content="This indicator is related to tracking or analytics services."
                                        tabindex="0" role="button">
                                        <i class="fas fa-paw"></i>
                                    </div>
                                    {% elif row['indicator_annotation'] == 'lead_gen' %}
                                    <div data-toggle="popover" data-trigger="hover"
                                        data-content="This indicator can be used for lead generation" tabindex="0"
                                        role="button">
                                        <i class="fas fa-search-location"></i>
                                    </div>
                                    {% else %}
                                    {% endif %}
                                </td>

                                <td>{{ row['domain_name'] }}</td>
                                <td>
                                    {% if row['indicator_type'] in indicator_metadata %}
                                    <div data-toggle="popover" data-trigger="hover"
                                        title="{{ indicator_metadata[row['indicator_type']].name }}"
                                        data-content="{{ indicator_metadata[row['indicator_type']].description }} {{ indicator_metadata[row['indicator_type']].interpretation }}"
                                        tabindex="0" role="button">
                                        <strong>{{ row['indicator_type'] }} ({{
                                            indicator_metadata[row['indicator_type']].name }})
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                                                <path
                                                    d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                                <path
                                                    d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" />
                                            </svg>
                                        </strong>
                                    </div>
                                    {% else %}
                                    {{ row['indicator_type'] }}
                                    {% endif %}
                                </td>
                                <td>{{ row['indicator_content'] }}</td>

                            </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
                {% endif %}
                {% if matches_df %}
                <div class=" row mt-5">
                    <div class="col-md-8 ">
                        <h2>How are these site(s) similar to others? (Matches)</h2>
                    </div>
                    <div class="col-md-4 ">
                        <button class="btn btn-primary float-right" type="button" data-toggle="collapse"
                            data-target="#collapsibleMatchesTable" aria-expanded="false"
                            aria-controls="collapsibleMatchesTable">
                            Show/Hide Table
                        </button>
                    </div>
                </div>

                <p>Matches are pairs of domain names that have been identified as having identical or > 90% matches
                    where an
                    indicator is a list. The table below shows all matches for the specified domain(s). If the user selected two or more websites, the results indicate any similarities between those sites. </p>
                <div class="progress" style="height: 25px;">
                    {% for tier, count in matches_summary.items() %}

                    {% if tier == '1' %}
                    <div class="progress-bar bg-success" role="progressbar" style="width: {{count}}%"
                        aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                        }}%</div>
                    {% elif tier == '2' %}
                    <div class="progress-bar bg-warning text-dark" role="progressbar" style="width: {{count}}%"
                        aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                        }}%</div>
                    {% elif tier == '3' %}
                    <div class="progress-bar bg-info " role="progressbar" style="width: {{count}}%"
                        aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                        }}%</div>
                    {% else %}
                    <div class="progress-bar bg-light text-dark" role="progressbar" style="width: {{count}}%"
                        aria-valuenow="{{count}}" aria-valuemin="0" aria-valuemax="100">Tier {{tier}}: {{count|round|int
                        }}%</div>
                    {% endif %}
                    {% endfor %}
                </div>

                <div class="mt-3 collapse show" id="collapsibleMatchesTable">
                    <table id="matches_table" class="table table-hover table-striped" style="width:100%">
                        <thead class="thead-light">
                            <tr>
                                <th>Primary Domain Name</th>
                                <th>Matching Domain Name</th>
                                <th>Match Type</th>
                                <th>Match Value</th>
                            </tr>
                        </thead>
                        <tbody>

                            {% for row in matches_df %}
                            {% if row['match_type'][0] == '1' %}
                            <tr class="table-success">
                                {% elif row['match_type'][0] == '2' %}
                            <tr class="table-warning">
                                {% else %}
                            <tr class="table-info">
                                {% endif %}
                                <td>{{ row['domain_name_x'] }}</td>
                                <td>{{ row['domain_name_y'] }}</td>
                                <td>
                                    {% if row['match_type'] in indicator_metadata %}
                                    <div data-toggle="popover" data-trigger="hover"
                                        title="{{ indicator_metadata[row['match_type']].name }}"
                                        data-content="{{ indicator_metadata[row['match_type']].description }} {{ indicator_metadata[row['match_type']].interpretation }}"
                                        tabindex="0" role="button">
                                        <strong>{{ row['match_type'] }} ({{ indicator_metadata[row['match_type']].name
                                            }})
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                                                <path
                                                    d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                                <path
                                                    d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" />
                                            </svg>
                                        </strong>
                                    </div>
                                    {% else %}
                                    {{ row['match_type'] }}
                                    {% endif %}
                                </td>
                                <td>{{ row['match_value'] }}
                                    {% if row['matched_on'] and row['matched_on'] is not none %} | {{ row['matched_on']
                                    }}{%
                                    endif %}
                                </td>
                            </tr>
                            {% endfor %}

                        </tbody>

                    </table>
                </div>
                {% endif %}
            </div>
        </div>
        <div class="card mr-5 ml-5 mt-5">
            <div class="card-body">
                <div class="row">

                    <div class="col-md-3">
                        <h5 class="card-title">Sponsoring Organizations</h5>
                    </div>
                    <div class="col-md-9">
                        <h5 class="card-title">Implementing Organizations</h5>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-3">

                        <div class="row">
                            <a href="https://gulbenkian.pt/emifund/" rel="nofollow">
                                <img src="https://camo.githubusercontent.com/4644af047750ba3f45a2f3efcf9f746857215547882628e6e2a34ca806cc72ac/68747470733a2f2f7365637572696e6764656d6f63726163792e676d6675732e6f72672f77702d636f6e74656e742f75706c6f6164732f323032342f30322f454d49465f486f72697a6f6e74616c5f6c6f676f5f426c61636b2e706e67"
                                    alt="MJRC Logo" height="256"
                                    data-canonical-src="https://securingdemocracy.gmfus.org/wp-content/uploads/2024/02/EMIF_Horizontal_logo_Black.png"
                                    style="width: 100%;height:auto">
                            </a>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="row">
                            <div class="col-md-4 mt-5">
                                <a href="https://securingdemocracy.gmfus.org/" rel="nofollow">
                                    <img src="https://securingdemocracy.gmfus.org/wp-content/uploads/2023/05/ASD-Logo.png"
                                        alt="ASD Logo"
                                        data-canonical-src="https://securingdemocracy.gmfus.org/wp-content/uploads/2020/02/ASD_Logo_Black.png"
                                        style="width: 100%;height:auto">
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="https://www.isdglobal.org/" rel="nofollow">
                                    <img src="https://securingdemocracy.gmfus.org/wp-content/uploads/2024/03/ISD-logo-ISD-Red.png"
                                        alt="ISD Logo"
                                        data-canonical-src="https://securingdemocracy.gmfus.org/wp-content/uploads/2020/02/ISD_Logo_Black.png"
                                        style="width: 100%;height:auto"></a>
                            </div>
                            <div class="col-md-4">
                                <a href="https://www.uva.nl/en" rel="nofollow">
                                    <img src="https://securingdemocracy.gmfus.org/wp-content/uploads/2024/03/uva-logo-uvamerken_eng-1406x236-300dpi.png"
                                        alt="UvA Logo"
                                        data-canonical-src="https://securingdemocracy.gmfus.org/wp-content/uploads/2020/02/UvA_Logo_Black.png"
                                        style="width: 100%;height:auto"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row ml-3 mr-3">
                    The sole responsibility for any content supported by the European Media and Information Fund lies
                    with
                    the author(s) and it may not necessarily reflect the positions of the EMIF and the Fund Partners,
                    the
                    Calouste Gulbenkian Foundation and the European University Institute.
                </div>
            </div>
        </div>
        <div id="gdprConsentModal" class="text-light-gray"
            style="display:none; position: fixed; z-index: 1000; left: 0; bottom: 0; width: 100%; background-color: rgba(0,0,0,0.9);  border-top: 1px solid #ccc;">
            <div style="padding: 20px; max-width: 1440px; margin: 0 auto; ">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h5 style="margin: 0;">GDPR Compliance Notice</h5>
                    <button type="button" id="closeGdprModal"
                        style="border: none; background: none; font-size: 20px;">&times;</button>
                </div>
                <div style="margin-top: 10px;">
                    <p>The Information Laundromat is committed to protecting and respecting your privacy in compliance
                        with the General Data Protection Regulation (GDPR). This disclaimer outlines the nature of the
                        data processing activities conducted by our tool. Selecting 'Accept' consents to the data
                        collection</p>
                    <h4 id="data-collection-and-use">Data Collection and Use</h4>
                    <p>The Information Laundromat tool collects data through two forms, as part of its functions:
                        Content Similarity Search and Domain Forensics Matching.
                        <strong>Content Similarity Search</strong>: This function processes URLs and text snippets
                        provided by the user to detect occurrences of the given text across various websites.
                        <strong>Domain Forensics Matching</strong>: This function processes a domain URL and analyzes
                        aspects of website architecture, design, and usage to identify unique indicators.
                        Additional data—IPs, pages visited, and time of visit—are collected automatically as part of
                        website analytics and logging. Logs are deleted after 30 days and analytics are anonymized.
                    </p>
                    <h4 id="purpose-of-processing">Purpose of Processing</h4>
                    <p>The form data and results are collected and are solely used for the purpose of usage analytics
                        and potential corpus expansion. </p>
                </div>
                <div style="display: flex; justify-content: end; gap: 10px; margin-top: 10px;">
                    <button type="button" class="btn btn-secondary" id="gdprReject">Reject</button>
                    <button type="button" class="btn btn-primary" id="gdprAccept">Accept</button>
                </div>
            </div>
        </div>
    </div>
    <canvas class="background d-none d-sm-block"></canvas>
</body>
<style>
    .loading-overlay {
        position: fixed;
        width: 100%;
        height: 100%;
        background: rgba(128, 128, 128, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    table {
        table-layout: fixed;
        width: 100%;
    }

    td {
        word-wrap: break-word;
        white-space: normal;
    }

    .highlight-gdelt {
        background-color: lightgreen;
    }

    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
        background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
        background-color: #ccc;
    }

    .card {
        color: #333;
    }

    .bg-dark-gray {
        background-color: #333;
    }

    .text-light-gray {
        color: #aaa;
    }

    .card-text {
        color: #333;
    }

    .tab-active,
    .tab-inactive {
        padding: 0.75rem 1.25rem;
        display: block;
        width: 100%;
        text-align: center;
    }

    .tab-active {
        background-color: #fff;
        /* Active tab with default background */
        color: #333;
        /* Text color for active tab */
    }

    .tab-inactive {
        background-color: #555;
        /* Inactive tab with darker background */
        color: #fff;
        /* Text color for inactive tab */

    }

    .nav-tabs .nav-item.show .nav-link,
    .nav-tabs .nav-link.active {
        color: #495057;
        background-color: #fff;
        border-color: #dee2e6 #dee2e6 #fff;
    }

    .nav-link {
        background-color: #555;
        color: #fff;
        border: none;
        text-size-adjust: ;
    }

    .nav-link:hover {
        background-color: #555;
        color: #fff;
        border: none;
    }

    .nav-tabs {
        border-bottom: none;
    }

    .info-dot {
        display: inline-block;
        margin-left: 10px;
        cursor: pointer;
    }

    /* Custom styles for the popover */
    .popover {
        max-width: 100%;
        /* Max width of the popover */
    }

    /* Larger font size for the popover content */
    .popover-body {
        font-size: 1rem;
        /* Adjust font size as needed */
    }

    /* Ensure info icon is aligned with the input */
    .input-group-text {
        display: flex;
        align-items: center;
    }

    /* Style for info icon */
    .fas.fa-info-circle {
        cursor: pointer;
        /* Change cursor to indicate it's clickable */
    }

    .caret {
        display: none;
    }

    .btn-group .multiselect {
        border: 1px solid #ced4da;
    }

    .card-body-400 {
        min-height: 400px;
        overflow-y: auto;
    }

    table a {
        color: #45648f;
    }

    table a:hover {
        color: #45648f;
    }

    body {
        margin: 0;
        padding: 0;
    }

    .background {
        position: absolute;
        display: block;
        top: 0;
        left: 0;
        z-index: -1;
        opacity: 30%;

    }

    #dynamic-content span {
        display: inline-block;
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
        /* Smooth transition for the opacity change */
    }

    .top-nav a {
        color: #fff;
    }

    .top-nav a:hover {
        color: lightgray;

    }

    @keyframes pulseAnimation {
        0% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.1);
        }

        100% {
            transform: scale(1);
        }
    }

    .pulse-effect {
        animation: pulseAnimation 2s infinite;
    }

    .main-page {
        max-width: 1800px;
        margin: 0 auto;
    }
</style>

</html>